{% extends "./template.html" %}

{% block style %}
<link rel="stylesheet" href="/static/fileUpload/css/fileinput.min.css">
{% endblock %}

{% block content %}

<div class="panel">
	<div class="panel-heading">
		<h3>{{title}}</h3>
	</div>
	<div class="panel-body">
		<div class="form-group">
			<div class="file-loading">
				<input id="uploader" type="file" class="">
			</div>
		</div>
	</div>
</div>

{% endblock %}

{% block script %}
<script src="/static/fileUpload/js/fileinput.min.js"></script>
<script src="/static/fileUpload/js/locales/zh.js"></script>
<script>
	$(function () {
		// 文件上传框
        $('#uploader').fileinput({
            uploadUrl: 'http://127.0.0.1:8080/test',
            language : 'zh',
            allowedPreviewTypes : [ 'image' ],
            allowedFileExtensions : [ 'jpg', 'png', 'gif' ],
            maxFileSize : 20000,
            maxFilesNum : 1,
            fileType: "any",
            previewFileIcon: "<i class='glyphicon glyphicon-king'></i>",
            overwriteInitial: false,
            msgUploadError : '上传失败'
        });
        $('#uploader').on('fileuploaded', function(event, data, previewId, index) {
            console.log(event);
            event.type = 'fileuploaderror';
        });
        $('#uploader').on('fileuploaderror', function (event, data, msg) {
            console.log(data)
		});
	})
</script>
{% endblock %}